# レポート散文品質の改善計画

## 課題

記事の中盤セクション（「現在の状況」「注目プレイヤー」）が箇条書きの羅列になり、読み物として成立しない場合がある。

### 具体例（Zvec記事 2026-02-17）

```
**1. アーキテクチャ**
- **言語**: C++（81.5%）
- **ライセンス**: Apache 2.0
- **プラットフォーム**: Linux x86_64/ARM64...
**2. パフォーマンス指標**
- **QPS**: 8,000+
- **インデックス構築時間**: 大幅短縮...
```

スペックシートであって読み物ではなく、「なぜそれが重要なのか」が伝わらない。

### 良い例（SCAN Network記事 2026-02-15）

番号付き項目にも十分な散文が添えられ、読み物として成立している。

## 根本原因

Claude Code のデフォルトシステムプロンプトが「簡潔・構造的」な出力を促すため、`--append-system-prompt-file` でリサーチプロトコルを追記しても、コーディング向けバイアスが残る。

## 改善策

### Phase 1: プロトコル・テンプレート修正（実施済み 2026-02-17）

- `templates/report-template.md`: 各セクションに散文主体の指示を追加
- `prompts/research-protocol.md` Step 6: 散文品質基準を3項目追加
  - 散文主体ルール（箇条書き連鎖の禁止）
  - 文脈と意義（スペック羅列ではなく意義を語る）
  - 文のバリエーション（同構造の連続を避ける）

### Phase 2: `--system-prompt-file` への切り替え（Phase 1 の効果不十分な場合）

**What**: `--append-system-prompt-file`（追記）から `--system-prompt-file`（全置換）に変更し、リサーチャー専用のシステムプロンプトを設計する。

**Why**: Claude Code のデフォルトシステムプロンプトが含む「簡潔・構造的に」というバイアスを根元から除去する。ツール呼び出し能力はシステムプロンプトに依存せず動作するため、デフォルトを保持する技術的な必要性は低い。

**Alternatives**: 検討した代替案:
- 記事執筆スキル（SKILL.md）の導入 → `claude -p` モードでロード保証がないため見送り
- 二段階生成（リサーチノート → 散文変換） → ターン数・コスト増のため Phase 2 より後に検討

**リスク**:
- デフォルトシステムプロンプトが提供する未知の有益な指示を失う可能性
- ツール利用パターンが変わる可能性（要検証）

**実装時の確認事項**:
- ツール呼び出し（WebSearch, WebFetch, Read, Write, Glob, Grep）が正常に動作するか
- JSON 出力フォーマット（`--output-format json`）が維持されるか
- エラーハンドリングが適切か

## スキルリサーチ結果（2026-02-17）

既存の記事執筆向けスキルを7件調査し、いずれも直接導入は見送り。

| スキル | 適合度 | 見送り理由 |
|--------|--------|-----------|
| K-Dense-AI/scientific-writing | 8/10 | IMRaD（論文）構造前提 |
| aaaronmiller/humanize-writing | 7/10 | 後処理用。生成時制約ではない |
| ComposioHQ/content-research-writer | 6/10 | 対話型前提 |
| anthropics/doc-coauthoring | 5/10 | 対話型ワークフロー前提 |
| haowjy/creative-writing | 5/10 | フィクション向け |
| CheswickDEV/prompt-optimizer | 4/10 | スキルではなくプロンプト例 |
| Claude built-in prose rules | N/A | デフォルトに存在するが append で薄まる |

各スキルのベストプラクティスを抽出し、Phase 1 のプロトコル修正に反映済み。

## 評価方法

Phase 1 の効果は 2026-02-18 以降の生成記事で以下を確認:
- 「現在の状況」「注目プレイヤー」セクションに散文パラグラフがあるか
- 「見出し→箇条書き→見出し→箇条書き」の連鎖が解消されたか
- 情報の「なぜ重要か」が文章で説明されているか
